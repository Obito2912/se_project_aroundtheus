!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:i}=e;this._name=n,this._link=i,this._cardSelector=t,this._handleImageClick=s}_setEventListener(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardElement.querySelector("#card-title").textContent=this._name,this._setEventListener(),this._cardElement}}class t{constructor(e){this._element=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this.handleOverlayClick=this.handleOverlayClick.bind(this)}open(){this._element.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._element.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._element.querySelector(".modal__close").addEventListener("click",(()=>this.close())),this._element.addEventListener("click",this.handleOverlayClick)}handleOverlayClick(e){e.target.classList.contains("modal_opened")&&this.close()}}class s extends t{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._element.querySelector(".modal__form"),this._inputList=[...this._form.querySelectorAll(".modal__input")]}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._form.reset(),this.close()}))}}class n{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._modalButton=e.modalButton,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_toggleButtonState(e){this._hasInvalidInput(e)?this._disableSubmitButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){const e=[...this._form.querySelectorAll(this._inputSelector)];e.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState(e)}))})),this._toggleButtonState(e)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._disableSubmitButton()})),this._setEventListeners()}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",modalButton:".js-modal-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector(".js-add-popup").querySelector(".js-add-card-form"),o=document.querySelector(".profile-edit-modal").querySelector(".modal__form"),a=document.querySelector("#add-button"),l=document.querySelector("#profile-edit-button"),c=new s(".profile-edit-modal",(e=>{_.setUserInfo({name:e.title,title:e.description})})),d=new s(".js-add-popup",(e=>{const t=u({name:e.title,link:e.link});m.addItem(t)})),m=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=u(e);m.addItem(t)}},"#cards-list");function u(t){return new e(t,"#card-template",v).getView()}const _=new class{constructor(e){let{nameSelector:t,descriptionSelector:s}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s)}getUserInfo(){return{title:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,title:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}}({nameSelector:"#profile-title",descriptionSelector:"#profile-description"}),h=new n(i,o),p=new n(i,r),E=new class extends t{constructor(e){super(e),this._imageEl=this._element.querySelector("img"),this._captionEl=this._element.querySelector("figcaption")}open(e){let{link:t,name:s}=e;this._imageEl.src=t,this._imageEl.alt=s,this._captionEl.textContent=s,super.open()}}(".js-modal-popup-image");function v(e){E.open({link:e.link,name:e.name})}c.setEventListeners(),d.setEventListeners(),E.setEventListeners(),l.addEventListener("click",(()=>{const e=_.getUserInfo();c.setInputValues(e),c.open()})),a.addEventListener("click",(()=>{d.open()})),m.renderItems(),h.enableValidation(),p.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UU8sY0FDUlksRUFBZ0JsQyxtQkFDaEJtQyxFQUFlbkMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgLy8nLmNhcmRfX2xpa2UtYnV0dG9uJ1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8nLmNhcmRfX2RlbGV0ZS1idXR0b24nXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAvLycjY2FyZC1pbWFnZSdcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgLy8gZ2V0IHRoZSBjYXJkIHZpZXdcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2VcIik7XHJcbiAgICAvLyBBc3NpZ25pbmcgc3JjLCBhbHQsIGFuZCBuYW1lIHRvIGNhcmRzXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIC8vIHNldCBldmVudCBsaXN0ZW5lclxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gICAgLy8gcmV0dXJuIHRoZSBDYXJkXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5oYW5kbGVPdmVybGF5Q2xpY2sgPSB0aGlzLmhhbmRsZU92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVPdmVybGF5Q2xpY2spO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlT3ZlcmxheUNsaWNrKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIildO1xyXG4gICBcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXModmFsdWVzKXtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCk9PntcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlc1tpbnB1dC5uYW1lXVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IgKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxCdXR0b24gPSBzZXR0aW5ncy5tb2RhbEJ1dHRvbjsgXHJcbiAgICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7IFxyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzczsgXHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7IFxyXG5cclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSAnJztcclxuICAgICAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xyXG4gICAgICAgIGlmKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgICAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbHMpIHtcclxuICAgICAgICBpZih0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbHMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICAgICAgaW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVscyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxzKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsIi8vIEFSUkFZIE9GIElOSVRJQUwgQ0FSRFMgSU5GT1xyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBPQkpFQ1QgV0lUSCBTRUxFQ1RPUlMgQU5EIENMQVNTRVNcclxuY29uc3QgZm9ybVNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIG1vZGFsQnV0dG9uOiBcIi5qcy1tb2RhbC1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vLyAgIFJFR1VMQVIgVkFSSUFCTEVTIFRPIEdFVCBUTyBNWSBIVE1MIEVMRU1FTlRTXHJcblxyXG5jb25zdCBjYXJkQWRkUG9wVXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLWFkZC1wb3B1cFwiKTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBjYXJkQWRkUG9wVXAucXVlcnlTZWxlY3RvcihcIi5qcy1hZGQtY2FyZC1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcblxyXG4vLyBFWFBPUlRTIFxyXG5cclxuZXhwb3J0IHtcclxuICBjYXJkQWRkQnV0dG9uLFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgZm9ybVNldHRpbmdzXHJcbn0iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbiAgYWRkQ2FyZEZvcm0sXHJcbiAgY2FyZEFkZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBmb3JtU2V0dGluZ3NcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG4vLyBJTlNUQU5DRVMgT0YgTVkgQ0xBU1NFU1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cFdpdGhGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIucHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgKGZvcm1WYWx1ZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogZm9ybVZhbHVlcy50aXRsZSxcclxuICAgICAgdGl0bGU6IGZvcm1WYWx1ZXMuZGVzY3JpcHRpb24sXHJcbiAgICB9KTtcclxuICB9XHJcbik7XHJcblxyXG5jb25zdCBhZGRDYXJkUG9wdXBXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLmpzLWFkZC1wb3B1cFwiLFxyXG4gIChmb3JtVmFsdWVzKSA9PiB7XHJcbiAgICBjb25zdCBuZXdDYXJkRGF0YSA9IHtcclxuICAgICAgbmFtZTogZm9ybVZhbHVlcy50aXRsZSxcclxuICAgICAgbGluazogZm9ybVZhbHVlcy5saW5rLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSk7XHJcbiAgICBzZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZEVsZW1lbnQpO1xyXG4gIH1cclxuKTtcclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiI2NhcmRzLWxpc3RcIlxyXG4pO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiI3Byb2ZpbGUtdGl0bGVcIixcclxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIsXHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVNldHRpbmdzLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5jb25zdCBhZGRQcm9maWxlRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1TZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5jb25zdCBpbWFnZVBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLmpzLW1vZGFsLXBvcHVwLWltYWdlXCIpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soY2FyZERhdGEpIHtcclxuICBpbWFnZVBvcHVwV2l0aEltYWdlLm9wZW4oe1xyXG4gICAgbGluazogY2FyZERhdGEubGluayxcclxuICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXHJcbiAgfSk7XHJcbn1cclxuXHJcbmVkaXRQcm9maWxlUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkUG9wdXBXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZVBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKClcclxuICBlZGl0UHJvZmlsZVBvcHVwV2l0aEZvcm0uc2V0SW5wdXRWYWx1ZXMoY3VycmVudFVzZXJEYXRhKVxyXG4gIGVkaXRQcm9maWxlUG9wdXBXaXRoRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRQb3B1cFdpdGhGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbmVkaXRQcm9maWxlRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZFByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShkb21FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChkb21FbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGl0bGU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIHRpdGxlIH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcbiBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWFnZUVsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW1nXCIpO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb25FbCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcImZpZ2NhcHRpb25cIik7XHJcbiAgICB9XHJcblxyXG4gICAgb3Blbih7bGluaywgbmFtZX0pIHtcclxuICAgICAgICB0aGlzLl9pbWFnZUVsLnNyYyA9IGxpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VFbC5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcHRpb25FbC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVyIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiUG9wdXAiLCJzZWxlY3RvciIsIl9lbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImhhbmRsZU92ZXJsYXlDbGljayIsIm9wZW4iLCJhZGQiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfbW9kYWxCdXR0b24iLCJtb2RhbEJ1dHRvbiIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVscyIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwiZm9ybVNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiYWRkQ2FyZEZvcm0iLCJwcm9maWxlRWRpdEZvcm0iLCJjYXJkQWRkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJlZGl0UHJvZmlsZVBvcHVwV2l0aEZvcm0iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFkZENhcmRQb3B1cFdpdGhGb3JtIiwibmV3Q2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImRvbUVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJfcmVmMiIsImVkaXRQcm9maWxlRm9ybSIsImFkZFByb2ZpbGVGb3JtIiwiaW1hZ2VQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZUVsIiwiX2NhcHRpb25FbCIsImN1cnJlbnRVc2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=